!function(e){var t={};function a(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(r,o,function(t){return e[t]}.bind(null,o));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=3)}({3:function(e,t){$(function(){let e=1,t=JSON.parse(window.localStorage.getItem("userInfo"));function a(e){$.ajax({url:serverUrl+"/getPictureList",type:"GET",data:{prdType:e},headers:{token:t.token},success:function(e){if(200==e.code){let a=e.data,o="";a.forEach(e=>{var a="";e.list.forEach(e=>{a+=`\n                  <li data-src="${e.fileUrl}">\n                    <div>\n                      ${e.fileName}\n                      <a class='download' href="${e.fileUrl.replace(/index.html$/,"assets.zip")}" download="assets.zip">下载切图</a>\n                    </div>\n                    <div>${r(e.createdAt)}</div>\n                  </li>\n                `}),o+=`<div class="prd">\n                  <div class="prdTitle">\n                    <img class="jiantou" src="../img/jiantou.svg" alt="" srcset="">\n                    ${e.prdName}\n                    ${1==t.jurisdiction?`<img class="upload" src="../img/uplaod.svg" alt="" srcset="" data-id='${e.prdId}' data-prdname='${e.prdName}'></img>`:""}\n                  </div>\n                  <ul class="list">\n                    ${a}\n                  <ul>\n                </div>`}),$("#catalogue").html(o)}},error:function(e){console.log(e)}})}1==t.jurisdiction&&$(".add").css("display","block"),initSendInfo(function(e){console.log("treedata",e),$("#tree").treeview({showcheck:!0,data:e})}),$(".icon").click(function(){$(".control").fadeToggle("slow","linear"),$("#leftC").fadeToggle("slow","linear"),$("#rightC").fadeToggle("slow","linear")}),$("#catalogue").on("click",".prdTitle",function(){$(".list").fadeOut("slow"),$(this).next(".list").fadeToggle("slow","linear")}),$("#catalogue").on("click","li",function(){$(".list li").removeClass("active"),$(this).addClass("active"),$("iframe").attr("src",$(this)[0].dataset.src)}),$(".typeToggle div").click(function(){$(".typeToggle div").removeClass("active"),$(this).addClass("active"),$("iframe").attr("src",""),e=$(this)[0].dataset.type,a($(this)[0].dataset.type)}),$(".add").click(function(){1==e?$("#uTitle").html("UI图上传"):$("#uTitle").html("原型图上传"),$("#prdName").val(""),$("#prdId").val(""),$("#upload_file").val(""),$(".cover").hide(),$("#to").hide(),$("#progress_bar_top").css("width","0%"),$("#progressValue").html("0%"),$(".uploadModel").fadeToggle("slow","linear")}),$("#catalogue").on("click",".upload",function(t){t.stopPropagation(),1==e?$("#uTitle").html("UI图上传"):$("#uTitle").html("原型图上传"),$("#upload_file").val(""),$(".cover").show(),$("#to").show(),$("#progress_bar_top").css("width","0%"),$("#progressValue").html("0%"),$("#prdName").val($(this)[0].dataset.prdname),$("#willName").html($(this)[0].dataset.prdname),$("#prdId").val($(this)[0].dataset.id),$(".uploadModel").fadeToggle("slow","linear")}),$(".cancle").click(function(){$(".uploadModel").fadeOut("slow","linear")}),a(1);var r=function(e){var t=new Date(e),a=t.getFullYear(),r=t.getMonth()+1;r=r<10?"0"+r:r;var o=t.getDate();o=o<10?"0"+o:o;var n=t.getHours();n=n<10?"0"+n:n;var l=t.getMinutes();return a+"-"+r+"-"+o+" "+n+":"+(l=l<10?"0"+l:l)};function o(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;$("#progress_bar_top").css("width",t+"%"),$("#progressValue").html(t+"%")}}$("#submit").click(function(){var r=$("#tree").getCheckedNodes(),n=[];r.forEach(function(e){e&&n.push(e)});var l=new FormData($("#myForm")[0]);l.get("prdName")?l.get("upName").size&&!/zip$/.test(l.get("upName")).name?n.length?function(r,n){window.FormData?$.ajax({url:serverUrl+"/uploadPrd?prdName="+r.get("prdName")+"&fileName="+r.get("upName").name+"&type="+e+"&prdId="+r.get("prdId")+"&sList="+n.toString(),type:"POST",data:r,headers:{token:t.token},cache:!1,processData:!1,contentType:!1,async:!0,xhr:function(){return console.log("111"),myXhr=$.ajaxSettings.xhr(),myXhr.upload&&myXhr.upload.addEventListener("progress",o,!1),myXhr},success:function(t){200==t.code&&(window.$tip.success("上传成功"),$(".uploadModel").fadeOut("slow","linear"),a(e))}}):window.$tip.error("浏览器不支持上传方式，请更换浏览器！")}(l,n):window.$tip.error("请选择通知对象"):window.$tip.error("请上传压缩包,支持上传zip压缩包"):window.$tip.error("请填写项目名称")})})}});